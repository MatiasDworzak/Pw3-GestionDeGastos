@model PresupuestoPaginaViewModel
@{
    ViewData["Title"] = "Presupuesto actual";
}

<div>
    <div class="d-flex justify-content-center mb-4">
        <h1>Presupuesto mensual</h1>
    </div>


    <div class="d-flex justify-content-around">
        
        <p>Monto total: @Model.UltimoPresupuesto.MontoLimite</p>
        <p>Monto gastado: @Model.UltimoPresupuesto.MontoActualGastado</p>
    </div>

    <div class="progress mb-4">
        <div class="progress-bar" role="progressbar" aria-label="Example with label"
             style="width: 25%;" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100">
            25%
        </div>
    </div>

    <div class="d-flex justify-content-center mb-5">
        <a class="btn btn-secondary" asp-action="EditarPresupuesto" data-bs-toggle="modal" data-bs-target="#modalEditarMontoTotal">Editar monto total</a>
    </div>

    <div class="modal fade" id="modalEditarMontoTotal" tabindex="-1" aria-labelledby="modalEditarMontoTotal" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h1 class="modal-title fs-5" id="modalEditarMontoTotal">Nuevo presupuesto</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="ActualizarPresupuesto" method="post">
                        <div class="d-flex flex-column gap-2">
                            <label>Ingrese el monto total para el nuevo presupuesto:</label>
                            <input placeholder="Ejemplo: 1.000.000"></input>
                        </div>
                        <div class="d-flex justify-content-end">
                            <button class="btn btn-secondary mt-2 ">Confirmar presupuesto</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <table class="table mt-4">
        <thead>
            <h3>Historial de presupuestos</h3>
            <tr>
                <th scope="col">Fecha</th>
                <th scope="col">Monto establecido</th>
                <th scope="col">Monto gastado</th>
                <th scope="col">Acciones</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var presupuesto in Model.ListaPresupuestos)
            {
                <tr>
                    <td>@presupuesto.Mes/@presupuesto.Anio</td>
                    <td>@presupuesto.MontoLimite</td>
                    <td>@presupuesto.MontoActualGastado</td>
                    <td><a class="btn btn-dark" asp-action="MostrarGastosPresupuesto">Ver gastos</a></td>
                </tr>
            }
            @*    <tr>
                <td>Agosto 2025</td>
                <td>$1.000.000</td>
                <td>$900.000</td>
                <td><a class="btn btn-dark" asp-action="MostrarGastosPresupuesto">Ver gastos</a></td>
            </tr> *@
        </tbody>
    </table>
</div>